# Generated by confd
---
nubis_users::user:
<% if @sudo_users and @sudo_users != [] -%><% @sudo_users.each do |sudo_users| -%>
  # <%= sudo_users %>{{ range $dir := lsdir "/<%= sudo_users %>" }}{{ if exists (print "/<%= sudo_users %>/" $dir "/sshPublicKey") }}
  {{ getv (print "/<%= sudo_users %>/" $dir "/uid") }}:
    groups:
      - wheel
      - users
    email: {{ getv (print "/<%= sudo_users %>/" $dir "/email") }}
    ssh_keys: |{{ $pubkey := getv (print "/<%= sudo_users %>/" $dir "/sshPublicKey") }}
      {{ replace $pubkey "\n" "\n      " -1 }}
{{ end }}{{ end }}
<% end -%><% end -%>
<% if @nubis_users and @nubis_users != [] -%><% @nubis_users.each do |nubis_users| -%>
  # <%= nubis_users %>{{ range $dir := lsdir "/<%= nubis_users %>" }}{{ if exists (print "/<%= nubis_users %>/" $dir "/sshPublicKey") }}
  {{ getv (print "/<%= nubis_users %>/" $dir "/uid") }}:
    groups:
      - users
    email: {{ getv (print "/<%= nubis_users %>/" $dir "/email") }}
    ssh_keys: |{{ $pubkey := getv (print "/<%= nubis_users %>/" $dir "/sshPublicKey") }}
      {{ replace $pubkey "\n" "\n      " -1 }}
{{ end }}{{ end }}
<% end -%><% end -%>
# vim:ft=yaml:
